---
title: 【事前準備】2-2 變數（Variable）的含意與記憶體（Memory）
tags: 《透過認知模型認識 JavaScript》
---

# 變數（variable）

![](https://i.imgur.com/7HjfegX.jpg)

身為一名倉儲管理員，你走進了一間擺滿了各式各樣箱子的房間，而箱子上面貼著一些標籤，而你日常工作便是從中找到你要的箱子，並把裡面的東西交給客戶……

變數在 JavaScript 中可謂是最基礎的語法，然而不起眼的它卻是串聯整個 JavaScript 資料流向最重要的概念。

---

## 宣告（declare）

在執行 JavaScript 的時候，你可以想像整個環境就如同一個擺了許多箱子的巨大倉庫。

而變數的用意就是讓引擎中的解析器能夠去尋找到對應位置的一個值（Value）：

```js
var box;
```

比如上方程式碼在執行的時候，引擎藉由語彙分析出了關鍵字 `var` ，在 JavaScript 中意思是「我接下來要宣告一個變數」，而空格後的那段文字 `box` 便是解析器接下來用來當作 **識別字（identifier）** 的內容。

這時解析器會先去尋找一張大表，裡面記著各式各樣的變數名稱與記憶體地址（memory address），接著，它會分配一個沒用過的地址（例如：0x00）並附註在後面，此外它。

<!-- todo 把另一章表邏輯+進去-->

|識別字|記憶體地址|
|---|---|
|box|0x00|

|記憶體地址|資料|
|---|---|
|0x00|undefined|

## 取得資料

同樣地，在宣告變數之後，我們可以透過變數名稱再次尋找到它：

```js
box; // undefined
```

在上面程式碼中，解析器會先去表中尋找 `box` 的記憶體位置 `0x00`，接著他到倉庫中的尋找貼著 `0x00` 的箱子，並且打開箱子看看裡面有什麼東西。

然而，`0x00` 箱子中並沒有放任何東西，所以透過解析器的傳達，引擎最後告訴我們說 `undefined`（未定義）。

## 儲存資料

如果我們想要在那個箱子內放入東西那麼我們該怎麼做？

答案是透過 `=` 賦值運算符（Assignment Operator）。

```js
box = 'Secret!'
```
但是……抱持著數學家的眼光，你可能會懷疑它不是 **等號** 嗎？但我必須很遺憾且鄭重的告訴你說：「不是，且千萬不要這樣理解。」

因為 `=` 這個符號在程式語言中多半是「賦予某個值給另一個識別字」的概念，也就是說當我撰寫 `box = 'Secret!'` 時，我的用意是要將 `'Secret!'` 這個值「寫入」 `box` 所對應的記憶體資料中。

用個例子來舉例：

```js
var boxA = 1;
var boxB = 2;

boxA = boxB;

boxA; // ?
```

若是依照數學家邏輯來看的話，他肯定會在 `boxA = boxB` 那段看的一頭霧水。

然而這段程式在執行期（Run time）實際上更貼近的是：

首先解析器先瀏覽了整個程式一輪，解析器發現宣告了一個 `boxA` 和`boxB`，接著告訴瀏覽器分配位置：

|識別字|記憶體地址|
|---|---|
|boxA|0x00|
|boxB|0x01|

|記憶體位置|資料|
|---|---|
|0x00|undefined|
|0x01|undefined|

接下來開始一行一行看起，首先我們將 `1` 賦值給 `boxA`：

|識別字|記憶體地址|資料|
|---|---|---|
|boxA|0x00|1|
|boxB|0x01|undefined|

接著將 `2` 賦值給 `boxB`：

|識別字|記憶體地址|資料|
|---|---|---|
|boxA|0x00|1|
|boxB|0x01|2|

到了第四行時，要將 `boxB` 賦值給 `boxA`

在這個過程中你會發現，分配位置（記憶體）這件事情在 JavaScript 中並不會讓你來操作，你所能做的就是向引擎說明你要 **宣告**、**取得** 還是 **賦值**。