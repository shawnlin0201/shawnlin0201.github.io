---
title: 【事前準備】2-2 變數（Variable）的含意與記憶體（Memory）
tags: 《透過認知模型認識 JavaScript》
---

# 變數（variable）

![](https://i.imgur.com/7HjfegX.jpg)

在開發程式的過程中，我們時常會需要處理資料的問題，而整個存取資料的過程就好像倉儲業者一樣：

> 司機：「我這邊有一個東西要送到市政府，便條紙上說代號是 `富士山`，我需要裡面的東西。」

> 配送員：「好喔！我找一下，代號叫做 `富士山` 是吧？我查一下它的位置……它的位置是 021。」

> 接著配送員走進倉庫編號 021 的位置並打開了箱子，裡面是一個蘋果。

> 配送員：「給你，裡面是一個蘋果！」

> 司機：「好的，那我要出發了！」

---

## 宣告變數

在 JavaScript 中，我們可以透過 `var` 關鍵字來宣告一個變數：

```js
var box;
```
接著在 **程式執行期的創造階段**，解析器會透過一張記著識別字的大表，來確認先前有沒有同樣的識別字：

![](https://i.imgur.com/HonZ1Dq.png)

如果之前還沒宣告過，那麼它就會接著分配一個沒用過的記憶體地址（例如：0x00）給這個識別字，並且初始化一個值 `undefined`。

![](https://i.imgur.com/92QWgWs.png)

如果已經使用 `var` 宣告過的話，那麼他將不會重新分配一個記憶體地址。

> 如果你是使用 ES6 中的 `const` 重複宣告變數的話，引擎會提示你該變數已經被宣告過了。

---

## 藉由變數取得資料

同樣地，在宣告變數之後，我們可以透過變數名稱再次尋找到它：

```js
box; // undefined
```
在上面程式碼中，解析器會先去表中尋找 `box` 的記憶體位置，若有宣告過自然而然會有一個記憶體地址，而解析器就可以順利的回傳記憶體地址所擁有的值。

![](https://i.imgur.com/92QWgWs.png)

倘若試著取得未宣告的變數時，引擎會拋出一個錯誤來提示你：

```js
anotherBox; // Uncaught ReferenceError: anotherBox is not defined
```

---

## 藉由變數儲存資料

如果我們想要在那個記憶體地址的值內放入東西那麼我們該怎麼做？

**答案是透過 `=` 賦值運算符（Assignment Operator）。**

```js
box = 'Secret!';
```

但是……抱持著數學家的眼光，你可能會懷疑它不是 **等號** 嗎？但我必須很遺憾且鄭重的告訴你說：「不是，且千萬不要這樣理解。」

顧名思義， `=` 這個符號在程式語言中多半是 **「賦予某個值」** 的概念，也就是說當我撰寫 `box = 'Secret!'` 時，我的用意是要將 `'Secret!'` 這個值「寫入」 `box` 所對應的記憶體資料中。

![](https://i.imgur.com/uxeF3ey.png)

### 另一個賦值的例子

```js
var box = 1;

box = 2;

box; // ?
```

若是依照數學家邏輯來看的話，他肯定會在 `box = 2` 那段看的一頭霧水，`box` 明明是代表 `1` 啊？為什麼可以 `1 = 2` 呢？

實際上這段程式碼做的事情是這樣子的：

首先程式執行的創造階段先瀏覽了整個程式一輪，發現我們宣告了一個 `box`，接著如同上方宣告所講過的方式分配記憶體位置：

![](https://i.imgur.com/92QWgWs.png)

接著經由 `box` 的記憶體地址找到 `0x00`，將 `1` 填入 `0x00` 中：

![](https://i.imgur.com/eXiGV2m.png)

然後在執行 `box = 2` 的過程時，解析器會重新分配一個記憶體位置給它：

![](https://i.imgur.com/HALVI8M.png)

所以到了最後 `box` 的值也就是 `0x01` 中的 `2`。

---

## 變數命名（一）
現在讀者應該對於變數的存取值有個基本觀念了，而有關於變數的命名可以參考下列兩個基本指標：

- 命名規範
- 命名規格

### 命名規範
- 可使用英文、下底線 `_` 、錢字號 `$`與數字等等來替變數命名
- 不能使用數字開頭的名稱
- 不能使用關鍵字、保留字，避免語法解析時會解析錯誤（如：`var`）。
- 大小寫會視為不同的變數。（如：`box` 跟 `BOX`）

### 命名風格
命名風格的部分大部分有以下幾種：

- 小駝峰式（lower camel case）
```js
var firstName;
var lastName;
```
- 大駝峰式（upper camel case）
```js
var FirstName;
var LastName;
```
- 蛇形命名法（snake case）
```js
var first_name;
var last_name;
```

至於選用哪種，請依照團隊的開發習慣作為考量；最後，還有另一種比較特別的是全大寫心法：

```js
var PI = 3.1415926;
```

這種命名方法通常出現在常量的數值，也就是一個固定值，也就是說我們平常不會去更動它的值，主要是為了取這個值來進行運算，而透過這樣的命名心法我們會自然而然的不會去任意的更動它！（當然，你也可以使用 ES6 中的 `const` 來宣告常數）。

以上的的命名規範與命名風格只能算是基礎該做的，而接下來往後幾個章節會陸陸續續會再強化這一塊的概念！

---

## 建立模型時間
目標：瞭解變數的宣告、存取值、與命名。

### 整理重點：

- 分配記憶體這件事情在 JavaScript 中並不能自己決定，我們能對變數做的事情就是 **取值** 與 **賦值**。
- 變數對於引擎來說是一種識別字（identifier），主要是用來比對它所儲存的值是什麼。
- 變數對於開發者來說，最關心的是裡面的值是用來處理什麼資料的。
- 變數的命名有一定的規範。
- 為了能夠更輕易瞭解變數的存取上述的模型有經過簡化，實際上經過處理過後的變數與記憶體的概念會來的更複雜（可參考：[從變數看 bytecode](https://www.coderbridge.com/@aszx87410/de0143ab98ca495a8903519525d60a85)）

### 認知模型樹狀圖參考：
請試著透過這張樹狀圖或你自製的圖表回想這章節的概念：

- JavaScript
  - 變數
    - 宣告
      - 重複宣告
    - 賦值
      - 重複賦值
    - 取值
    - 命名
      - 規範
      - 風格