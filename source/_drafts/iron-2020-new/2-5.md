---
title: 【建立模型】2-5 流程與計算：敘述句（statement）與思考（thinking）
tags: 《透過認知模型認識 JavaScript》
---

# 流程與思考

![](https://i.imgur.com/iiR1jdN.jpg)
> cover picture sponsor: [gleammming.art](https://www.instagram.com/gleammming.art/?hl=zh-tw)

在 Maier（1931）的兩繩問題研究當中，受試者被要求在一密閉房間中同時抓住兩條由天花板上垂下的繩子，而房間內只有一把鐵鎚、其他的小工具以及，且兩條繩子垂下的距離很長，使你無法抓著其中一條繩子同時摸到另外一條繩子。

---

> 思考一下要是你是受試者，你會怎麼解決兩繩問題？

## 開放與封閉

根據 Wakefield（1992）對於問題與回答的定義，我們總共可以分為四個象限：

![](https://i.imgur.com/q1uQikx.png)

其中的開放意思即為結構不定的，沒有明確的指示，想做什麼都可以；而封閉意思即為結構清晰且有明確的指示，受限一定的條件以內的事件。

在四個象限中的問題所對應的解決策略也不大相同：

- 開放性問題 與 開放性解答：透過各種不同的策略來解決問題。
- 開放性問題 與 封閉性解答：透過 **頓悟（insight）** 來得到解決問題。
- 封閉性問題 與 開放性解答：透過發散性的思考來解決問題。
- 封閉性問題 與 封閉性解答：透過瞭解問題解出唯一一種解答。

而上方中的兩繩問題便是屬於開放性問題與封閉性解答，該實驗原先最主要是要讓受試者 **頓悟（insight）** 到可以將鐵鎚綁在繩子上，並透過 **鐘擺的原理** 來解決問題。

其中，開放性問題與封閉性問題最大的差異點在於封閉性可藉由類似 **步驟（step）** 的概念慢慢解開問題，比如在圈叉遊戲中，由於步驟是有限的，因此我們可以透過回推步驟，歸類出後手必輸的幾種下法；開放性問題則需要透過重新建構問題的本質，轉化問題表徵才能夠藉由已知的部分推論下去，例如我們在 1-3 章中的食物問題中，我們除了要知道有沒有餓肚子之外，也要先查看零錢是否足夠，才不會在結帳時才發現沒錢結帳。

對於開發 JavaScript 程式碼的實作看似也是屬於開放性的問答題，有些人可能因為不擅長沒有步驟的解決方式，因此卡在這個階段而無法想出解法。

然而我們可以透過類似 1-4 章節中的訓練方式，將邏輯透過自己擅長的表達方式 **具象** 出來，接著就可以明確地修改邏輯上的問題，並依照最後調整好的邏輯流程轉化為實際的程式碼，使其問題從開放性的問題轉變成 **如何轉化為程式碼** 的封閉性問題，而這個步驟即為 **捷思法（heutistics）** 中的 **目標分析策略**。

> ### 延伸閱讀： 捷思法（heutistics）
> 捷思法是在講述人類會透過某些心歷路程來解決問題，而常見的捷思法有下列四種方式：
> - 目標分析：試圖尋找到問題的目標來分析問題的焦點，藉此縮短最初要解決的部分與最後所要達成的目標的距離，就好比我們具象化流程圖。
> - 前向運作：從問題的源頭開始一步一步的解決，例如從初始函式（init function）開始思考。
> - 反向運作：從問題的目標開始反推解決的辦法，例如從函式 `return` 值開始思考。
> - 不斷測試：想出不同的解決方式，一個一個進行測試。

接下來，在定義出明確的目標與流程之後，我們就要學習如何透過 JavaScript 中的敘述句來表達我們的流程。

## 敘述句

在 JavaScript 中，除了計算數值用的運算式（expression）之外，最主要常見的便是敘述句（statement，又可稱為述句、陳述句等）。

其中，「宣告」、「命令」與「流程」等等的語法皆為此類，而它們的用意最主要在於可以幫助我們控制有關邏輯上的流程，以下列出幾個較為常見的敘述句語法：

宣告類語法：
- `var`
- `function`

流程類語法：
- `if/else`
- `switch`
- `try/catch`

跳躍類語法：
- `break`
- `continue`

迭代類語法：
- `for`、`for/in`、`for/of`
- `while`
- `do/while`

### block

在所有敘述句當中，有一個特別的敘述句語法，我們稱其為 **區塊（block，`{}`）** 語法，它最主要是用來組合敘述句成為一個 **區塊**：

```js
{
    var text = 'block syntax!'
}
```

而這個區塊大多數會用來與敘述句結合使用，例如接下來將介紹到的 `if` 敘述句：

```js
if (運算式) {
    // 運算式為真值時就執行這個區塊的程式
}
```

對於 `var` 來說，這個區塊語法並不影響到他的作用域（scope），也就是說使用 `var` 所宣告的變數如同在該區塊外面宣告變數一樣：

```js
var text = 'global value'

{
    var text = 'block value'
    console.log('text', text) // 'block value'
}

console.log('text', text) // 'block value'
```

> #### 延伸閱讀：`let`、`const` 與區塊語法
> 對於 `let` 以及 `const` 來說，它們如同 `var` 一樣是宣告敘述句，但差別在於他們限定於當下 **區塊敘述句以內** 的範圍：
> 
> ```js
> let text = 'global value'
> 
> {
>     let text = 'block value'
>     console.log('text', text) // 'block value'
> }
> 
> console.log('text', text) // 'global value'
> ```

其他關於作用域更詳細的內容我將會在第四章中提及！

這裡最主要的用意是讓你知道區塊對於部分的敘述句來說是有其意義的！

至於其他的敘述句大約會用在那些地方呢？接下來我們以之前在 1-3 章中提過的流程圖為例：

![https://ithelp.ithome.com.tw/upload/images/20200918/20119062wHpDMOplce.png](https://ithelp.ithome.com.tw/upload/images/20200918/20119062wHpDMOplce.png)


### if 敘述句
在這張流程圖中的「身上有錢嗎」的環節當中我們會運用到「是、否」判斷，而在 JavaScript 中我們可以利用 `if` 述句來表達流程：

```js
var cashOnMe = 200;
var foodPrice = 100;

if (cashOnMe >= foodPrice){
 // 買食物...
}
```

其中 `()` 內所放的是前面我們提到的運算式，而當運算式其結果值為 `truthy` 類型時就會執行後面的區塊敘述句內的所有程式碼。

若你需要更多流程你也可以使用 `if/else` 述句：

```js
var cashOnMe = 200;
var foodPrice = 100;

if (cashOnMe >= foodPrice){
 // 買食物...
} else {
 // 回家
}
```

甚至你也可以使用 `if/else if/else` 來定義流程：


```js
var cashOnMe = 200;
var foodPrice = 100;
var haveMoneyInBank = true;

if (cashOnMe >= foodPrice){
    // 有足夠的錢買食物...
} else if ( haveMoneyInBank ) {
    // 沒有錢，但帳戶中有錢，領個錢就可以買東西
} else {
    // 沒有錢，且帳戶中也沒有錢，乾脆回家
}
```


### switch 敘述句

透過上方 `if/else if/else` 中的範例我們可以察覺，若判斷有多種情境時，雖然我們可以在 `if` 與 `else` 敘述句之間插入 `else if` 來增加判斷內容，但如果情境太多我們將會很難追蹤實際上執行到哪個區塊內。而 `switch` 敘述句允許我們透過一個運算結果，來定義不同結果時我們應該要做什麼事情：

```js
var week = new Date().getDay();

switch(week) {
    case 1:
        console.log('隨便吃吃！')
        break;
    case 2:
        console.log('隨便吃吃！')
        break;
    case 3:
        console.log('隨便吃吃！')
        break;
    case 4:
        console.log('隨便吃吃！')
        break;
    case 5:
        console.log('隨便吃吃！')
        break;
    case 6:
        console.log('吃大餐囉！')
        break;
    case 0:
        console.log('吃大餐囉！')
        break;
    default:
        console.log('想一下要吃什麼。')
        break;
}
```

也可以藉由 `switch` 特性，將不同 `case` 情境合併在一起提升閱讀性跟維護性：

```js
var week = new Date().getDay();

switch(week) {
    case 1:
    case 2:
    case 3:
    case 4:
    case 5:
        console.log('隨便吃吃！')
        break;
    case 6:
    case 0:
        console.log('吃大餐囉！')
        break;
    default:
        console.log('想一下要吃什麼。')
        break;
}
```

另外若你的情境需要的是一段範圍時，也有很 `tricky` 的作法：

```js
var cashOnMe = 200;

switch(true) {
    case (cashOnMe >= 150):
        console.log('買便當套餐（含飲料、小菜、濃湯）')
        break;
    case (cashOnMe >= 130):
        console.log('買便當、飲料與小菜')
        break;
    case (cashOnMe >= 100):
        console.log('買便當與飲料')
        break;
    case (cashOnMe >= 80):
        console.log('買便當')
        break;
    default:
        console.log('回家')
        break;
}

```

但我個人不建議這麼做，可以的話還是回歸到 `if/else` 寫法。

> 相關討論可參考 stackoverflow 上的這兩篇討論文：
> - [討論文一](https://stackoverflow.com/questions/17145723/how-can-i-use-ranges-in-a-switch-case-statement-using-javascript?noredirect=1&lq=1)
> - [討論文二](https://stackoverflow.com/questions/5619832/switch-on-ranges-of-integers-in-javascript)

### for 敘述句

`for` 迴圈基本上是用在「需要 **重複** 執行某件事情直到……為止」的情境當中，例如流程圖中的「肚子餓嗎？」一直到「吃下食物」後的循環。

而 `for` 迴圈的基本用法是：

```js
for(初始敘述句;條件式;完成敘述句) {
    // 區塊內敘述句
}
```
1. 執行初始敘述句。
2. 條件式若為真值則執行下方區塊內的敘述句，若否則執行完成敘述句後就離開整個 `for` 敘述句。
3. 每完成一次區塊內敘述句就執行小括弧最後的完成敘述句，接著在回到第二部中檢查是否為真值。

套用流程圖情境的概念碼：

```js
var cashOnMe = 200
var foodPrice = 50
var foodProvideSatietyPercentage = 10 // 假設食物給予的飽足感百分比

for(var satiety = 0; satiety =< 100; satiety += foodProvideSatiety){
    if (/* 檢查一下身上的錢是否足夠 */){

        if(/* 判斷是否有想吃的食物 */){
            // 排隊結帳結帳
        } else {
            // 回家    
        }

    } else {
        // 回家
    }    
}
```

> 如 1-3 中我們提到的，檢查到這邊你應該開始發現流程圖中有些流程仍需要改進，所以初步的流程規劃、規格定案相當的重要，後面我們會陸續提到要怎麼調整這些內容。

### function 述句

<!-- todo -->










而「肚子餓嗎」、「身上有錢嗎」、「層架上有想吃的嗎」這些事情其實它都是規範成一定的行為，我們可以透過函式敘述來包裝這些步驟：

```js
// 概念碼
function 肚子餓嗎() {
    if (飽足感 < 飽的感覺){
        return true
    } 
    return false
}

function 身上有錢嗎() {
    if (身上帶的錢 >= 食物價格){
        return true
    }

    return false
}

function 層架上有想吃的嗎(層架) {
    const 想吃的食物 = ['咖啡飯']
    let 有看到想吃的嗎 = false
    想吃的食物.forEach(function(食物) {
        層架.indexOf(食物)
    })
    return 有看到想吃的嗎
}
```


## 建立模型時間
目標：理解 JavaScript 表達式與運算式之間的差異。

### 整理重點：

### 認知模型樹狀圖參考：
