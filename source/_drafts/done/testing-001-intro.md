---
title: Testing 關於前端測試這回事
date: 2020-01-01 00:00:00
tags:
- [前端]
- [JavaScript]
- [Testing]
categories: 
- [JavaScript, Testing]
---

<div style="display:flex;justify-content:center;">
  <img style="object-fit:cover;" src='' width='200px' height='200px' />
</div>

身為工程師的一員，常常聽到許多人在討論測試的議題，縱使公司本身沒有導入測試，但仍然可以為自己學一下測試的技術。而學每項技術當然都有它的目的，絕非為了學而學，因此要來介紹一下為什麼前端工程師領域的中的測試是
什麼？為什麼要寫？以及要如何寫？

# 目的

對於前端開發來說，大部分的時間都在於撰寫視覺與資料上的邏輯，尤其若是公司專案中時常會需要手刻很多客製化的功能時，我們時常要藉由開發人員工具、打斷點等諸如此類的檢視手段，來看看我們所開發的程式是否顯示正確，開發人數少的話，基本上大致上都能瞭解整個專案程式碼的運作邏輯。

而事情當然沒這麼簡單。

假若今天接手了一個多年前由已離職前輩所開發的專案，並且專案經理要求要在這份專案架構底下修改與新增一些功能，面對著龐大架構下的檔案，有時候只能慢慢開始去釐清這份專案的模樣。

雖然 2015 年後前端現代框架陸陸續續的出現，也替我們整理了不少事情，但在現代開發元件化的架構下，我們有時仍然得要去檢測資料流向等等問題，跟以前比起來其實只是差在關注點的問題。

而測試的目的就是在於，我們可以藉由一個良好的測試程式碼，來測試新增修改後的程式是否仍然能導出正確的結果，並且透過測試驗證通過，可以使得開發團隊對於更動後的程式碼能夠更有信心。

# 關注角度
瞭解測試的目的與一些好處後，我們來瞭解一下在測試中不同的關注角度。

對於前端測試來說，我們首要關注的地方在於**視覺上的呈現（UI Interface）**，再細分下去的話還可分為：

- **單元測試（Unit testing）**
- **整合測試（Integration testing）**
- **端對端測試（End-to-End testing，E2E testing）**

接著來說明這些關注角度的差異在哪裡。

## 單元測試（Unit testing）
單元測試是我們的第一道防線，最主要所關注的地方在於基本**程式邏輯上的運作**，對於 JavaScript 語言來說，單元測試就好比是在檢測**函式本身所運作的邏輯**是否正確。而單元測試的測試案例也可以協助我們檢查是否遺漏了一些邊際效應、臨界值等等問題，使得我們所撰寫的程式能夠更加穩固。

對於單元測試來說，前端可選用的工具有像是：**Jest.js**、**Mocha.js** 等等。

## 整合測試（Integration testing）
整合測試則是介於端對端測試與單元測試中介的橋樑，透過整合測試，我們可以檢查多個程式彼此間的運作是否正常，而不只是各做各的檢測，最後合在一起又出問題。

## 端對端測試（End-to-End testing，E2E testing）
最後，端對端測試主要是指從使用者端角度至真實服務系統端的檢測，如同使用者真正在使用開發中的產品一樣，去檢查是否畫面呈現上有問題。

對於端對端測試來說，前端選用的工具有像是：**Protractor.js**、**Nightwatch.js**、**Cypress.js** 等等。

透過上述的說明，不難發現這三種面向的關注點其實不大相同，也都有彼此的價值，因此對於測試來說，這三種測試都是可以存在且不衝突的。

# 測試效益
當我們開發測試程式碼時，其實不免會占用到實際開發業務程式碼的部分，一個熟稔的工程師可以在測試上如魚得水，可能可以很快的撰寫出測試程式碼來維護自己的程式，但仍然要花上許多時間；而不熟測試的工程師，可能反而寫測的時間可能遠過於實際開發的時間，那麼我們要如何克服這些問題呢？

我個人認為測試應該是協助我們開發而不是阻礙。若時程上真的來不及撰寫覆蓋率高的測試程式碼，至少要去做到一些**重點保護**。

好比如果是一個有提供查詢服務的網站，若搜尋區塊佔了很大的使用率或是這個網站的關鍵功能，那麼則至少得在搜尋的區塊做好測試保護的部分。

而對於資深工程師來說，我們還能將測試程式碼導入 CI/CD 整合的概念，藉由像是 **Travis CI**、**Circle CI** 等等工具來幫助我們，達到自動化測試的概念。

以上便是個人對於前端測試的看法，實際上測試仍然要依照每個專案去做些微的調整，才能達到測試最大化的效益。

這裡也幫台灣測試社群推廣一下：[F2EUnit](https://www.facebook.com/groups/F2EUnit.tw/)，若實際對於測試有什麼疑問，在這個社團都能聊聊。
